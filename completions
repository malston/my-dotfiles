[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh"

export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"
# Setup autocomplete for minio cli commands
# complete -C /usr/local/bin/mc mc

# source "$HOME/.sdkman/bin/sdkman-init.sh"

# export PATH="$HOME/.jenv/bin:$PATH"
# eval "$(jenv init -)"

# eval "$(rbenv init -)"

export BASH_SILENCE_DEPRECATION_WARNING=1

# Go
export PATH=~/bin:~/.bin:~/go/bin:/usr/local/go/bin:$PATH
export GOPATH=$HOME/workspace/go
export PATH=$GOPATH/bin:$PATH
# export PATH="/usr/local/opt/go@1.15/bin:$PATH"

# enable ginkgo focus in editors
export GINKGO_EDITOR_INTEGRATION=true

# Setup autocomplete for kubectl commands
if command -v kubectl &>/dev/null; then
  source <(kubectl completion bash)
  alias k=kubectl
  # complete -F __start_kubectl k
  complete -o default -F __start_kubectl k
fi


# GNU Sed
if [ -d /usr/local/opt/gnu-sed/libexec/gnubin ]; then
  PATH="/usr/local/opt/gnu-sed/libexec/gnubin:$PATH"
fi

# enable direnv
if command -v direnv 1>/dev/null 2>&1; then
  eval "$(direnv hook bash)"
fi

# Python
# See https://github.com/pyenv/pyenv
# See https://github.com/pyenv/pyenv-virtualenv
if command -v pyenv 1>/dev/null 2>&1; then
  eval "$(pyenv init -)"
  # We want to regularly go to our virtual environment directory
  export WORKON_HOME=~/.virtualenvs

  # If in a given virtual environment, make a virtual environment directory
  # If one does not already exist
  mkdir -p $WORKON_HOME

  # Activate the new virtual environment by calling this script
  # The workon and mkvirtualenv functions are in here
  # test -e "${HOME}/.pyenv/versions/$(pyenv version-name)/bin/virtualenvwrapper.sh" && source "${HOME}/.pyenv/versions/$(pyenv version-name)/bin/virtualenvwrapper.sh"
  eval "$(pyenv virtualenv-init -)"
fi

# if command -v flux &> /dev/null; then
#   source <(flux completion bash)
# fi
# if command -v tanzu &> /dev/null; then
#   source <(tanzu completion bash)
# fi
# if command -v glab &> /dev/null; then
#   source <(glab completion bash)
# fi
# if command -v kp &> /dev/null; then
#   source <(kp completion bash)
# fi

if command -v starship &> /dev/null; then
  eval "$(starship init bash)"
fi

